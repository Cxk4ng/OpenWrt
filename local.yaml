#Clash.Meta(mihomo)
K4NG: &K4NG
    interval: 43200           # æ›´æ–°é¢‘ç‡: 12h
    health-check:
        enable: true
        url: 'https://www.gstatic.com/generate_204'
        interval: 300         # æµ‹é€Ÿé—´éš”: 5min
        timeout: 5000         # è¶…æ—¶æ—¶é—´: 5s
        lazy: true
        expected-status: 204  # æœŸæœ›çŠ¶æ€ç : 204


# Proxy Providers
proxy-providers:
  CNIX:                                         # èŠ‚ç‚¹é›†å
    url: https://is.domainforsub.work/sub/9ef349b36621bea3/clash  # è®¢é˜…åœ°å€
    type: http                                  # è¯·æ±‚åè®®
    <<: *K4NG                                   # å¼•ç”¨æµ‹é€Ÿæ¨¡æ¿
    path: './proxy_provider/CNIX.yaml'          # ç¼“å­˜è·¯å¾„
    proxy: ğŸŸ å›½å¤–ä»£ç†                           # ä»£ç†
    filter: '^(?!.*(?i)(?:NEVER_MATCH)).*$'     # è¿‡æ»¤æ­£åˆ™


# Global Configuration
mixed-port: 7890            # æ··åˆç«¯å£
socks-port: 0               # SOCKS5ç«¯å£ (0è¡¨ç¤ºæµé‡ä»mixed-portå‡ºå»)
port: 0                     # HTTPç«¯å£
redir-port: 0               # é€æ˜ä»£ç†ç«¯å£
tproxy-port: 0              # TProxyç«¯å£
mode: rule                  # è¿è¡Œæ¨¡å¼ (rule,global,direct)
log-level: info             # æ—¥å¿—çº§åˆ« (silent,error,warn,info,debug)
ipv6: true                  # ipv6å¼€å…³ (æ˜¯å¦å¤„ç†ipv6æµé‡)
find-process-mode: always   # è¿›ç¨‹åŒ¹é…æ¨¡å¼
authentication: []          # èº«ä»½éªŒè¯ (ç©ºè¡¨ç¤ºæ— å¯†ç å³å¯è¿æ¥)
skip-auth-prefixes:         # è·³è¿‡éªŒè¯å‰ç¼€
  - 127.0.0.1/32
  - ::1/128
allow-lan: true             # å…è®¸å±€åŸŸç½‘
lan-disallowed-ips: []      # å±€åŸŸç½‘ç¦æ­¢IP
bind-address: "*"           # ç»‘å®šç›‘å¬åœ°å€
lan-allowed-ips:            # å±€åŸŸç½‘å…è®¸IP
  - 0.0.0.0/0
  - ::/0


# External Controller
external-controller: 0.0.0.0:7891
external-ui: ui
secret: ""
external-ui-url: 'https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip'
external-controller-cors:
  allow-origins:
    - "*"
  allow-private-network: true

profile:
  store-selected: true
  store-fake-ip: true

unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome

geodata-mode: true
geo-auto-update: false
geo-update-interval: 24
geox-url:
  geoip: 'https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat'
  geosite: 'https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat'
  mmdb: 'https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb'
  asn: 'https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb'


# Tunnel Configuration
tun:
  enable: true
  stack: mixed
  device: mihomo
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  strict-route: true
  mtu: 1500
  route-exclude-address: []


# DNS Configuration
dns:
  enable: true
  cache-algorithm: arc
  ipv6: true
  enhanced-mode: fake-ip
  nameserver:
    - quic://223.5.5.5

  # å¸¸è§â€œå›½å¤–ç«™ç‚¹â€å¼ºåˆ¶èµ°å›½å¤– DNSï¼ˆé¿å…è§£æåˆ°å›½å†…/æ±¡æŸ“ï¼‰
  nameserver-policy:
    "geosite:geolocation-!cn":
      - https://1.1.1.1/dns-query
      - https://8.8.8.8/dns-query
    "geosite:cn":
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
    "geosite:private":
      - system

  fake-ip-range: 198.18.0.1/15
  fake-ip-filter:
    # å†…ç½‘ä¸æœ¬æœº
    - DOMAIN,localhost
    - DOMAIN-SUFFIX,local
    - DOMAIN-SUFFIX,lan
    # Windows è¿é€šæ€§æ£€æµ‹
    - DOMAIN-SUFFIX,msftncsi.com
    - DOMAIN-SUFFIX,msftconnecttest.com


# Sniffer Configuration
sniffer:
  enable: true
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443


# Node Filters
HK: &HK
  '(é¦™æ¸¯|HK|Hong Kong|Hongkong)'

TW: &TW
  '(å°æ¹¾|TW|Taiwan)'

KR: &KR
  '(éŸ©å›½|KR|Korea|KOR)'

JP: &JP
  '(æ—¥æœ¬|JP|Japan|Tokyo)'

SG: &SG
  '(ç‹®åŸ|æ–°åŠ å¡|SG|Singapore)'

US: &US
  '(ç¾å›½|US|United States|Seattle)'

CA: &CA
  '(åŠ æ‹¿å¤§|CA|Canada)'

Asia: &AS
  '(æ¾³é—¨|æœé²œ|å°åº¦|å°åº¦å°¼è¥¿äºš|å°å°¼|åœŸè€³å…¶|ä¼Šæœ—|æ³°å›½|å·´åŸºæ–¯å¦|è²å¾‹å®¾|é©¬æ¥è¥¿äºš|è¶Šå—|ç¼…ç”¸|æŸ¬åŸ”å¯¨|è¿ªæ‹œ|ä»¥è‰²åˆ—|é˜¿è”é…‹|India)'

Europe: &EU
  '(ä¿„ç½—æ–¯|å¾·å›½|åœŸè€³å…¶|æ³•å›½|è‹±å›½|æ„å¤§åˆ©|è¥¿ç­ç‰™|ä¹Œå…‹å…°|æ³¢å…°|è·å…°|è‘¡è„ç‰™|æ¯”åˆ©æ—¶|çˆ±å°”å…°|åŒˆç‰™åˆ©|æ‘©å°”å¤šç“¦|German|French|United Kingdom|London|Russia|Moscow)'

America: &AM
  '(å·´è¥¿|å¢¨è¥¿å“¥|å“¥ä¼¦æ¯”äºš|é˜¿æ ¹å»·|ç§˜é²|å§”å†…ç‘æ‹‰|æ™ºåˆ©|å„ç“œå¤šå°”|ç»åˆ©ç»´äºš)'

Oceania: &OC
  '(æ¾³å¤§åˆ©äºš|å·´å¸ƒäºšæ–°å‡ å†…äºš|æ–°è¥¿å…°|æ–°å–€é‡Œå¤šå°¼äºš|æ–æµ|æ‚‰å°¼|Australia)'

Africa: &AF
  '(å—é|åŸƒåŠ|å°¼æ—¥åˆ©äºš|South Africa|Egypt)'

# Proxy Group Templates
Auto: &Auto
  type: url-test          # ç­–ç•¥ç»„ç±»å‹: è‡ªåŠ¨
  url: 'https://www.gstatic.com/generate_204'
  expected-status: 204    # æœŸæœ›çŠ¶æ€ç : 204
  interval: 300           # æµ‹é€Ÿé—´éš”: 5min
  timeout: 5000           # è¶…æ—¶æ—¶é—´: 5s
  lazy: true              # æ‡’åŠ è½½æ¨¡å¼
  tolerance: 5            # å®¹å·®å€¼: 5ms
  disable-udp: false      # ç¦ç”¨UDPå¼€å…³ (å…è®¸udpé€šè¿‡)
  hidden: false           # éšè—å¼€å…³ (ç•Œé¢å¯è§)
  include-all: true       # åŒ…å«æ‰€æœ‰èŠ‚ç‚¹

Select: &Select
  type: select            # ç­–ç•¥ç»„ç±»å‹: æ‰‹åŠ¨
  disable-udp: false      # ç¦ç”¨UDPå¼€å…³:
  hidden: false           # éšè—å¼€å…³ (falseè¡¨ç¤ºç•Œé¢å¯è§)
  include-all: true       # åŒ…å«æ‰€æœ‰èŠ‚ç‚¹

# Proxy Groups
proxy-groups:
  # Auto
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    <<: *Auto
    filter: *HK

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    <<: *Auto
    filter: *TW

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    <<: *Auto
    filter: *KR

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    <<: *Auto
    filter: *JP

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    <<: *Auto
    filter: *SG

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    <<: *Auto
    filter: *US

  - name: ğŸ‡¨ğŸ‡¦ åŠ å›½èŠ‚ç‚¹
    <<: *Auto
    filter: *CA

  - name: ğŸ äºšæ´²å›½å®¶
    <<: *Select
    filter: *AS

  - name: ğŸ° æ¬§æ´²å›½å®¶
    <<: *Select
    filter: *EU

  - name: ğŸ—ºï¸ ç¾æ´²å›½å®¶
    <<: *Select
    filter: *AM

  - name: ğŸ¦˜ æ¾³æ´²å›½å®¶
    <<: *Select
    filter: *OC

  - name: ğŸŒ éæ´²å›½å®¶
    <<: *Select
    filter: *AF

  - name: ğŸŸ å›½å¤–ä»£ç†
    type: select
    proxies: [
      ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¨ğŸ‡¦ åŠ å›½èŠ‚ç‚¹,
      ğŸ äºšæ´²å›½å®¶, ğŸ° æ¬§æ´²å›½å®¶, ğŸ—ºï¸ ç¾æ´²å›½å®¶, ğŸ¦˜ æ¾³æ´²å›½å®¶, ğŸŒ éæ´²å›½å®¶
    ]


# Rule Providers
rule-providers:
  # LAN
  LAN:                      # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Lan/Lan.yaml'
    path: './rule_set/Lan.list'

  # China
  China:                    # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/China/China.list'
    path: './rule_set/China.list'

  # Direct
  Direct:                   # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Direct/Direct.list'
    path: './rule_set/Direct.list'

  # ChinaMax
  ChinaMax:                 # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax.list'
    path: './rule_set/ChinaMax.list'

  # ChinaIPs
  ChinaIPs:                 # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaIPs/ChinaIPs.list'
    path: './rule_set/ChinaIPs.list'

  # ChinaMedia
  ChinaMedia:               # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMedia/ChinaMedia.list'
    path: './rule_set/ChinaMedia.list'

  # ProxyWhitelist
  ProxyWhitelist:           # è§„åˆ™é›†åç§°
    type: http              # è·å–ç±»å‹
    behavior: classical     # è§„åˆ™è¡Œä¸ºæ¨¡å¼ (ç»å…¸æ¨¡å¼ æ”¯æŒåŸŸåã€IPã€å…³é”®è¯)
    interval: 43200         # æ›´æ–°é¢‘ç‡: 12h
    proxy: ğŸŸ å›½å¤–ä»£ç†       # ä¸‹è½½æ—¶ä½¿ç”¨çš„ä»£ç†
    url: 'https://raw.githubusercontent.com/cxk4ng/OpenWrt/main/rule/ProxyWhitelist.list'
    path: './rule_set/ProxyWhitelist.list'


# Rules
rules:
  - RULE-SET,LAN,DIRECT
  - RULE-SET,China,DIRECT
  - RULE-SET,Direct,DIRECT
  - RULE-SET,ChinaMax,DIRECT
  - RULE-SET,ChinaIPs,DIRECT
  - RULE-SET,ChinaMedia,DIRECT
  - RULE-SET,ProxyWhitelist,DIRECT
  - MATCH,ğŸŸ å›½å¤–ä»£ç†
